<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª - Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ± Ù…Ø¹ Ù‚Ø¯Ø±Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©</title>
    <meta name="description" content="Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª - Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ± Ù…Ù† Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ Ù…Ø¹ Ù‚Ø¯Ø±Ø§Øª Ø¨Ø±Ù…Ø¬ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©">
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ· ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Cairo:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Ù…ÙƒØªØ¨Ø© ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="highlight-theme">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/sql.min.js"></script>
    
    <style>
        :root {
            /* DeepSeek Color Palette */
            --primary-blue: #2563eb;
            --primary-blue-light: #3b82f6;
            --primary-blue-dark: #1d4ed8;
            --secondary-blue: #60a5fa;
            --accent-blue: #93c5fd;
            
            --background-primary: #ffffff;
            --background-secondary: #f8fafc;
            --background-tertiary: #f1f5f9;
            
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --text-light: #94a3b8;
            
            --border-light: #e2e8f0;
            --border-medium: #cbd5e1;
            --border-dark: #94a3b8;
            
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;

            /* Ø£Ù„ÙˆØ§Ù† Ø®Ø§ØµØ© Ø¨Ø§Ù„ÙƒÙˆØ¯ */
            --code-background: #0d1117;
            --code-text: #e6edf3;
            --code-border: #30363d;
            --copy-btn-bg: #21262d;
            --copy-btn-hover: #30363d;
            --copy-success: #238636;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Cairo', sans-serif;
            direction: rtl;
            background: var(--background-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header Styles */
        .header {
            background: var(--background-primary);
            border-bottom: 1px solid var(--border-light);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 3rem;
            height: 3rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.25rem;
            position: relative;
            box-shadow: var(--shadow-md);
        }

        .logo::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue), var(--accent-blue));
            border-radius: var(--radius-lg);
            z-index: -1;
            opacity: 0.3;
            filter: blur(4px);
        }

        .brand-info h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 0.25rem;
        }

        .brand-info p {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .header-middle {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .engine-badge {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-lg);
            font-weight: 600;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: var(--shadow-sm);
        }

        .pulse-dot {
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-btn {
            width: 2.5rem;
            height: 2.5rem;
            border: none;
            background: var(--background-secondary);
            color: var(--text-secondary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid var(--border-light);
        }

        .control-btn:hover {
            background: var(--primary-blue);
            color: white;
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        /* Info Panels */
        .info-panel {
            position: absolute;
            top: 100%;
            right: 1.5rem;
            background: var(--background-primary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            padding: 1.5rem;
            min-width: 300px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .info-panel.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .panel-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-item {
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .info-item:last-child {
            margin-bottom: 0;
        }

        .info-item strong {
            color: var(--text-primary);
        }

        /* Main Chat Area */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
            min-height: calc(100vh - 200px);
        }

        .messages-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Message Styles */
        .message {
            display: flex;
            gap: 1rem;
            max-width: 100%;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message.user .message-content {
            align-items: flex-end;
        }

        .message-avatar {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: white;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, var(--secondary-blue), var(--accent-blue));
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
        }

        .message-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .message-bubble {
            background: var(--background-primary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-xl);
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-sm);
            position: relative;
            max-width: 100%;
            word-wrap: break-word;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-blue-light));
            color: white;
            border: none;
        }

        .message-text {
            font-size: 0.95rem;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .message-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border-light);
        }

        .message.user .message-meta {
            border-top-color: rgba(255, 255, 255, 0.2);
        }

        .message-time {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .message.user .message-time {
            color: rgba(255, 255, 255, 0.8);
        }

        .message-actions {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            width: 2rem;
            height: 2rem;
            border: none;
            background: var(--background-secondary);
            color: var(--text-muted);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.75rem;
        }

        .action-btn:hover {
            background: var(--primary-blue);
            color: white;
            transform: scale(1.1);
        }

        /* ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© */
        .code-block {
            background: var(--code-background);
            border: 1px solid var(--code-border);
            border-radius: var(--radius-lg);
            margin: 1rem 0;
            overflow: hidden;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            position: relative;
            box-shadow: var(--shadow-lg);
        }

        .code-header {
            background: var(--copy-btn-bg);
            border-bottom: 1px solid var(--code-border);
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
        }

        .code-language {
            color: var(--code-text);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .language-icon {
            width: 16px;
            height: 16px;
            border-radius: 2px;
        }

        .copy-code-btn {
            background: var(--copy-btn-bg);
            border: 1px solid var(--code-border);
            color: var(--code-text);
            padding: 0.5rem 1rem;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Inter', 'Cairo', sans-serif;
        }

        .copy-code-btn:hover {
            background: var(--copy-btn-hover);
            transform: translateY(-1px);
        }

        .copy-code-btn.success {
            background: var(--copy-success);
            border-color: var(--copy-success);
        }

        .code-content {
            padding: 1rem;
            overflow-x: auto;
            background: var(--code-background);
            color: var(--code-text);
            line-height: 1.5;
            font-size: 0.875rem;
        }

        .code-content pre {
            margin: 0;
            padding: 0;
            background: none;
            color: inherit;
            font-family: inherit;
            font-size: inherit;
            line-height: inherit;
        }

        .code-content code {
            background: none;
            padding: 0;
            font-family: inherit;
            color: inherit;
            font-size: inherit;
        }

        /* ØªØ­Ø³ÙŠÙ† hljs */
        .hljs {
            background: var(--code-background) !important;
            color: var(--code-text) !important;
            padding: 0 !important;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„ÙƒÙˆØ¯ */
        .code-actions {
            background: var(--copy-btn-bg);
            border-top: 1px solid var(--code-border);
            padding: 0.5rem 1rem;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .code-action-btn {
            background: var(--copy-btn-bg);
            border: 1px solid var(--code-border);
            color: var(--code-text);
            padding: 0.375rem 0.75rem;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-family: 'Inter', 'Cairo', sans-serif;
        }

        .code-action-btn:hover {
            background: var(--copy-btn-hover);
            transform: translateY(-1px);
        }

        .code-action-btn i {
            font-size: 0.75rem;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            gap: 1rem;
            align-items: center;
            padding: 1rem 0;
        }

        .typing-avatar {
            width: 2.5rem;
            height: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .typing-content {
            background: var(--background-primary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-xl);
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-sm);
        }

        .typing-dots {
            display: flex;
            gap: 0.25rem;
            align-items: center;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        /* Input Area */
        .input-area {
            background: var(--background-primary);
            border-top: 1px solid var(--border-light);
            box-shadow: var(--shadow-lg);
            position: sticky;
            bottom: 0;
            z-index: 40;
        }

        .input-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .input-wrapper {
            background: var(--background-secondary);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: flex-end;
            gap: 0.75rem;
            padding: 0.75rem;
            transition: border-color 0.2s ease;
            position: relative;
        }

        .input-wrapper:focus-within {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .input-btn {
            width: 2.75rem;
            height: 2.75rem;
            border: none;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.125rem;
            flex-shrink: 0;
        }

        .record-btn {
            background: var(--background-primary);
            color: var(--text-secondary);
            border: 1px solid var(--border-medium);
        }

        .record-btn:hover {
            background: var(--primary-blue);
            color: white;
            transform: scale(1.05);
        }

        .record-btn.recording {
            background: #ef4444;
            color: white;
            animation: pulse 1s infinite;
        }

        .send-btn {
            background: var(--primary-blue);
            color: white;
        }

        .send-btn:hover {
            background: var(--primary-blue-dark);
            transform: scale(1.05);
        }

        .send-btn:disabled {
            background: var(--border-medium);
            color: var(--text-light);
            cursor: not-allowed;
            transform: none;
        }

        .message-input {
            flex: 1;
            border: none;
            background: transparent;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: inherit;
            resize: none;
            outline: none;
            min-height: 2.75rem;
            max-height: 200px;
            padding: 0.625rem 0;
            line-height: 1.5;
        }

        .message-input::placeholder {
            color: var(--text-muted);
        }

        .engine-info {
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-light);
            margin-top: 0.75rem;
        }

        /* Footer */
        .footer {
            background: var(--background-primary);
            border-top: 1px solid var(--border-light);
            padding: 1rem;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        /* Dark Mode */
        body.dark {
            --background-primary: #0f172a;
            --background-secondary: #1e293b;
            --background-tertiary: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --text-light: #64748b;
            --border-light: #334155;
            --border-medium: #475569;
            --border-dark: #64748b;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header-container {
                padding: 1rem;
            }

            .brand-info h1 {
                font-size: 1.25rem;
            }

            .brand-info p {
                font-size: 0.75rem;
            }

            .engine-badge {
                font-size: 0.75rem;
                padding: 0.375rem 0.75rem;
            }

            .main-container {
                padding: 1rem;
            }

            .message {
                gap: 0.75rem;
            }

            .message-avatar {
                width: 2rem;
                height: 2rem;
                font-size: 0.875rem;
            }

            .message-bubble {
                padding: 0.75rem 1rem;
            }

            .input-container {
                padding: 1rem;
            }

            .info-panel {
                right: 1rem;
                left: 1rem;
                min-width: auto;
            }

            .code-header {
                padding: 0.5rem 0.75rem;
                flex-direction: column;
                gap: 0.5rem;
                align-items: flex-start;
            }

            .code-actions {
                justify-content: center;
            }
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„ÙƒÙˆØ¯ */
        .inline-code {
            background: var(--background-tertiary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            padding: 0.125rem 0.375rem;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.875rem;
            color: var(--primary-blue);
        }

        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--copy-success);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: #ef4444;
        }

        .notification.info {
            background: var(--primary-blue);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <!-- Logo Section -->
            <div class="logo-section">
                <div class="logo">
                    <i class="fas fa-code"></i>
                </div>
                <div class="brand-info">
                    <h1>Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª</h1>
                    <p>Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ± â€¢</p>
                </div>
            </div>

            <!-- Engine Badge -->
            <div class="header-middle">
                <div class="engine-badge" id="engineBadge">
                    <div class="pulse-dot"></div>
                    <span>Ù‡Ø§ÙŠØ¨Ø± 4</span>
                </div>
            </div>

            <!-- Header Controls -->
            <div class="header-controls">
                <button class="control-btn" id="switchEngineBtn" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ùƒ">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="control-btn" id="companyInfoBtn" title="Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©">
                    <i class="fas fa-info-circle"></i>
                </button>
                <button class="control-btn" id="settingsBtn" title="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="control-btn" id="darkModeBtn" title="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>

        <!-- Company Info Panel -->
        <div class="info-panel" id="companyInfo">
            <h3 class="panel-title">
                <i class="fas fa-building"></i>
                Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø±
            </h3>
            <div class="panel-content">
                <div class="info-item"><strong>Ø§Ù„Ù…Ø·ÙˆØ±:</strong> Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ</div>
                <div class="info-item"><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> 771774634</div>
                <div class="info-item"><strong>Ø§Ù„ØªØ®ØµØµ:</strong> Ø­Ù„ÙˆÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</div>
                <div class="info-item"><strong>Ø§Ù„Ø±Ø¤ÙŠØ©:</strong> Ø±ÙŠØ§Ø¯Ø© Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</div>
                <div class="info-item"><strong>Ø§Ù„Ø¬Ø¯ÙŠØ¯:</strong> Ù‚Ø¯Ø±Ø§Øª Ø¨Ø±Ù…Ø¬ÙŠØ© Ù…ØªØ·ÙˆØ±Ø© Ù…Ø¹ ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯</div>
            </div>
        </div>

        <!-- Settings Panel -->
        <div class="info-panel" id="settingsPanel">
            <h3 class="panel-title">
                <i class="fas fa-cog"></i>
                Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </h3>
            <div class="panel-content">
                <div class="info-item">
                    <strong>Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ:</strong> 
                    <span id="currentEngineDisplay">Ù‡Ø§ÙŠØ¨Ø± 4</span>
                </div>
                <div class="info-item">
                    <strong>ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª:</strong> Ù…ÙØ¹Ù„
                </div>
                <div class="info-item">
                    <strong>Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±:</strong> Ù…ÙØ¹Ù„
                </div>
                <div class="info-item">
                    <strong>ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯:</strong> Ù…ÙØ¹Ù„
                </div>
                <div class="info-item">
                    <strong>Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯:</strong> Ù…ÙØ¹Ù„
                </div>
            </div>
        </div>
    </header>

    <!-- Main Chat Area -->
    <main class="main-container">
        <div class="messages-container" id="messagesContainer">
            <!-- Messages will be rendered here -->
        </div>
    </main>

    <!-- Input Area -->
    <footer class="input-area">
        <div class="input-container">
            <!-- Input Field -->
            <div class="input-wrapper">
                <!-- Record Button -->
                <button class="input-btn record-btn" id="recordBtn" title="Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØªÙŠ">
                    <i class="fas fa-microphone"></i>
                </button>

                <!-- Text Input -->
                <textarea 
                    id="messageInput" 
                    class="message-input"
                    placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§"
                    rows="1"
                ></textarea>

                <!-- Send Button -->
                <button class="input-btn send-btn" id="sendBtn" title="Ø¥Ø±Ø³Ø§Ù„">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>

            <!-- Engine Info -->
            <div class="engine-info" id="engineInfo">
                Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ù€ Ù‡Ø§ÙŠØ¨Ø± 4 â€¢ Ù…Ø­Ø±Ùƒ Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø©
            </div>
        </div>
    </footer>

    <!-- Footer -->
    <div class="footer">
        <p>Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Â© 2024 â€¢ ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ â€¢ Ù†Ø³Ø®Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©</p>
    </div>

    <!-- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div class="notification" id="notification"></div>

    <script>
        // Global Variables
        let messages = [];
        let currentEngine = 'hyper4';
        let isDarkMode = false;
        let isTyping = false;
        let isRecording = false;

        // API Keys
        const OPENAI_API_KEY = "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";
        const GEMINI_API_KEY = "AIzaSyCB3r9pWjvxvVS7gKys3naXv8Rk7Ab_n60";

        // DOM Elements
        const messagesContainer = document.getElementById('messagesContainer');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const recordBtn = document.getElementById('recordBtn');
        const switchEngineBtn = document.getElementById('switchEngineBtn');
        const darkModeBtn = document.getElementById('darkModeBtn');
        const companyInfoBtn = document.getElementById('companyInfoBtn');
        const settingsBtn = document.getElementById('settingsBtn');
        const companyInfo = document.getElementById('companyInfo');
        const settingsPanel = document.getElementById('settingsPanel');
        const engineBadge = document.getElementById('engineBadge');
        const currentEngineDisplay = document.getElementById('currentEngineDisplay');
        const engineInfo = document.getElementById('engineInfo');
        const notification = document.getElementById('notification');

        // Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© - ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ© Ù„Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©
        const PROGRAMMING_KEYWORDS = [
            // Ø¹Ø±Ø¨ÙŠ
            'Ø§ÙƒØªØ¨ ÙƒÙˆØ¯', 'Ø£Ù†Ø´Ø¦ ÙƒÙˆØ¯', 'Ø¨Ø±Ù…Ø¬', 'ÙƒÙˆØ¯', 'Ø¯Ø§Ù„Ø©', 'ÙØ§Ù†ÙƒØ´Ù†', 'ÙƒÙ„Ø§Ø³', 'ÙØ¦Ø©',
            'Ù…ØªØºÙŠØ±', 'Ù…ØµÙÙˆÙØ©', 'Ù‚Ø§Ø¦Ù…Ø©', 'Ø­Ù„Ù‚Ø© ØªÙƒØ±Ø§Ø±', 'Ø´Ø±Ø·', 'Ø§Ø³ØªØ¹Ù„Ø§Ù…', 'Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª',
            'Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…', 'Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ©', 'Ù…ÙƒØªØ¨Ø©', 'Ø¥Ø·Ø§Ø± Ø¹Ù…Ù„', 'API', 'JSON', 'XML', 'HTML', 'CSS', 'JavaScript',
            'Python', 'Java', 'C++', 'PHP', 'SQL', 'React', 'Vue', 'Angular', 'Node.js',
            'Ø§ÙƒØªØ¨ Ø¨Ø±Ù†Ø§Ù…Ø¬', 'Ø£Ù†Ø´Ø¦ ØªØ·Ø¨ÙŠÙ‚', 'ØµÙ…Ù… Ù…ÙˆÙ‚Ø¹', 'Ø·ÙˆØ±', 'Ø¨Ø±Ù…Ø¬Ø©', 'ØªØ·ÙˆÙŠØ±',
            // Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ
            'write code', 'create code', 'program', 'function', 'class', 'variable',
            'array', 'list', 'loop', 'condition', 'query', 'database', 'algorithm',
            'library', 'framework', 'script', 'code example', 'coding', 'programming',
            'develop', 'build app', 'create function', 'write script'
        ];

        // Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©
        const PROGRAMMING_LANGUAGES = {
            'javascript': { name: 'JavaScript', icon: 'ğŸŸ¨', color: '#f7df1e' },
            'python': { name: 'Python', icon: 'ğŸ', color: '#3776ab' },
            'html': { name: 'HTML', icon: 'ğŸŒ', color: '#e34c26' },
            'css': { name: 'CSS', icon: 'ğŸ¨', color: '#1572b6' },
            'java': { name: 'Java', icon: 'â˜•', color: '#ed8b00' },
            'cpp': { name: 'C++', icon: 'âš¡', color: '#00599c' },
            'php': { name: 'PHP', icon: 'ğŸ˜', color: '#777bb4' },
            'sql': { name: 'SQL', icon: 'ğŸ—ƒï¸', color: '#336791' },
            'json': { name: 'JSON', icon: 'ğŸ“‹', color: '#000000' },
            'xml': { name: 'XML', icon: 'ğŸ“„', color: '#ff6600' },
            'bash': { name: 'Bash', icon: 'ğŸ’»', color: '#4eaa25' },
            'powershell': { name: 'PowerShell', icon: 'ğŸ”·', color: '#012456' }
        };

        // Initialize App
        function initApp() {
            // ØªÙ‡ÙŠØ¦Ø© highlight.js
            hljs.highlightAll();
            
            addMessage({
                text: `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ±! ğŸš€ğŸ’» Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªØ·ÙˆØ± Ù…Ù† Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ù…Ø¹ Ù‚Ø¯Ø±Ø§Øª Ø¨Ø±Ù…Ø¬ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©.

ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø¢Ù†:

â€¢ ğŸ’¬ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø°ÙƒÙŠØ© Ù…Ø¹ Ù‡Ø§ÙŠØ¨Ø± 4 Ùˆ Ù‡Ø§ÙŠØ¨Ø± 1
â€¢ ğŸ¤ Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹Ùƒ Ø¨Ø§Ù„ØµÙˆØª  
â€¢ ğŸ¨ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ÙˆØµÙÙƒ
â€¢ ğŸ’» **ÙƒØªØ§Ø¨Ø© Ø£ÙƒÙˆØ§Ø¯ Ø¨Ø±Ù…Ø¬ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ø¹ ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø­Ùˆ**
â€¢ ğŸ“‹ **Ù†Ø³Ø® Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø¨Ø³Ù‡ÙˆÙ„Ø© Ù…Ø¹ Ø£Ø²Ø±Ø§Ø± Ù…Ø®ØµØµØ©**
â€¢ ğŸ”§ **Ø´Ø±Ø­ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ÙˆØªØ­Ø³ÙŠÙ†Ù‡Ø§**
â€¢ ğŸŒŸ **Ø¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©**

**Ø¬Ø±Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù…Ø«Ù„:**
â€¢ "Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ JavaScript Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªÙˆØ³Ø·"
â€¢ "Ø£Ù†Ø´Ø¦ Ø¯Ø§Ù„Ø© Python Ù„ÙØ±Ø² Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…"
â€¢ "ÙƒÙˆØ¯ HTML Ù„ØµÙØ­Ø© ÙˆÙŠØ¨ Ø¨Ø³ÙŠØ·Ø©"
â€¢ "Ø§Ø³ØªØ¹Ù„Ø§Ù… SQL Ù„Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"

ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙŠÙˆÙ…ØŸ ğŸ¤–âœ¨`,
                sender: 'ai',
                timestamp: getCurrentTime()
            });

            bindEvents();
            updateEngineUI();
        }

        // Bind Events
        function bindEvents() {
            sendBtn.addEventListener('click', handleSendMessage);
            messageInput.addEventListener('keypress', handleKeyPress);
            messageInput.addEventListener('input', autoResizeTextarea);
            recordBtn.addEventListener('click', toggleRecording);
            switchEngineBtn.addEventListener('click', switchEngine);
            darkModeBtn.addEventListener('click', toggleDarkMode);
            companyInfoBtn.addEventListener('click', toggleCompanyInfo);
            settingsBtn.addEventListener('click', toggleSettings);
        }

        // Handle Key Press
        function handleKeyPress(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSendMessage();
            }
        }

        // Auto Resize Textarea
        function autoResizeTextarea() {
            messageInput.style.height = 'auto';
            messageInput.style.height = Math.min(messageInput.scrollHeight, 200) + 'px';
        }

        // Get Current Time
        function getCurrentTime() {
            return new Date().toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' });
        }

        // Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©
        function isProgrammingRequest(text) {
            const lowerText = text.toLowerCase();
            return PROGRAMMING_KEYWORDS.some(keyword => 
                lowerText.includes(keyword.toLowerCase())
            );
        }

        // ØªØ­Ø¯ÙŠØ¯ Ù„ØºØ© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù…Ù† Ø§Ù„Ù†Øµ
        function detectProgrammingLanguage(text) {
            const lowerText = text.toLowerCase();
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù„ØºØ© Ù…Ø­Ø¯Ø¯Ø© ÙÙŠ Ø§Ù„Ù†Øµ
            for (const [key, lang] of Object.entries(PROGRAMMING_LANGUAGES)) {
                if (lowerText.includes(key) || lowerText.includes(lang.name.toLowerCase())) {
                    return key;
                }
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù„ØºØ§Øª Ù…Ø¹ÙŠÙ†Ø©
            if (lowerText.includes('Ù…ÙˆÙ‚Ø¹') || lowerText.includes('ØµÙØ­Ø© ÙˆÙŠØ¨') || lowerText.includes('website') || lowerText.includes('web page')) {
                return 'html';
            }
            if (lowerText.includes('ØªØµÙ…ÙŠÙ…') || lowerText.includes('ØªÙ†Ø³ÙŠÙ‚') || lowerText.includes('styling') || lowerText.includes('design')) {
                return 'css';
            }
            if (lowerText.includes('Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª') || lowerText.includes('Ø§Ø³ØªØ¹Ù„Ø§Ù…') || lowerText.includes('database') || lowerText.includes('query')) {
                return 'sql';
            }
            if (lowerText.includes('ØªØ¹Ù„Ù… Ø¢Ù„Ø©') || lowerText.includes('Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ') || lowerText.includes('machine learning') || lowerText.includes('ai')) {
                return 'python';
            }
            
            return 'javascript'; // Ø§ÙØªØ±Ø§Ø¶ÙŠ
        }

        // Ø¥Ù†Ø´Ø§Ø¡ ÙƒØªÙ„Ø© Ø§Ù„ÙƒÙˆØ¯
        function createCodeBlock(code, language = 'javascript', explanation = '') {
            const langInfo = PROGRAMMING_LANGUAGES[language] || PROGRAMMING_LANGUAGES['javascript'];
            const codeId = 'code-' + Date.now();
            
            return `
                <div class="code-block">
                    <div class="code-header">
                        <div class="code-language">
                            <span class="language-icon" style="background: ${langInfo.color}">${langInfo.icon}</span>
                            ${langInfo.name}
                        </div>
                        <button class="copy-code-btn" onclick="copyCode('${codeId}')">
                            <i class="fas fa-copy"></i>
                            Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯
                        </button>
                    </div>
                    <div class="code-content">
                        <pre><code id="${codeId}" class="${language}">${escapeHtml(code)}</code></pre>
                    </div>
                    <div class="code-actions">
                        <button class="code-action-btn" onclick="explainCode('${escapeForJs(code)}', '${language}')">
                            <i class="fas fa-question-circle"></i>
                            Ø´Ø±Ø­ Ø§Ù„ÙƒÙˆØ¯
                        </button>
                        <button class="code-action-btn" onclick="improveCode('${escapeForJs(code)}', '${language}')">
                            <i class="fas fa-magic"></i>
                            ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙƒÙˆØ¯
                        </button>
                        <button class="code-action-btn" onclick="runCode('${escapeForJs(code)}', '${language}')">
                            <i class="fas fa-play"></i>
                            ØªØ´ØºÙŠÙ„
                        </button>
                    </div>
                </div>
                ${explanation ? `<div style="margin-top: 1rem; padding: 1rem; background: var(--background-tertiary); border-radius: var(--radius-lg); border-left: 4px solid var(--primary-blue);"><strong>Ø´Ø±Ø­ Ø§Ù„ÙƒÙˆØ¯:</strong><br>${explanation}</div>` : ''}
            `;
        }

        // Escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Escape for JavaScript
        function escapeForJs(text) {
            return text.replace(/'/g, "\\'").replace(/"/g, '\\"').replace(/\n/g, '\\n');
        }

        // Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯
        function copyCode(codeId) {
            const codeElement = document.getElementById(codeId);
            if (codeElement) {
                const code = codeElement.textContent;
                navigator.clipboard.writeText(code).then(() => {
                    showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­! ğŸ“‹', 'success');
                    
                    // ØªØºÙŠÙŠØ± Ø²Ø± Ø§Ù„Ù†Ø³Ø® Ù…Ø¤Ù‚ØªØ§Ù‹
                    const copyBtn = codeElement.closest('.code-block').querySelector('.copy-code-btn');
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> ØªÙ… Ø§Ù„Ù†Ø³Ø®';
                    copyBtn.classList.add('success');
                    
                    setTimeout(() => {
                        copyBtn.innerHTML = originalHTML;
                        copyBtn.classList.remove('success');
                    }, 2000);
                }).catch(() => {
                    showNotification('ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯', 'error');
                });
            }
        }

        // Ø´Ø±Ø­ Ø§Ù„ÙƒÙˆØ¯
        async function explainCode(code, language) {
            const explanation = `Ø´Ø±Ø­ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù„ØºØ© ${PROGRAMMING_LANGUAGES[language]?.name || language}:\n\n${code}`;
            
            addMessage({
                text: explanation,
                sender: 'user',
                timestamp: getCurrentTime()
            });

            isTyping = true;
            showTypingIndicator();

            try {
                const response = await callAIForCodeExplanation(code, language);
                hideTypingIndicator();
                addMessage({
                    text: response,
                    sender: 'ai',
                    timestamp: getCurrentTime()
                });
            } catch (error) {
                hideTypingIndicator();
                addMessage({
                    text: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø´Ø±Ø­ Ø§Ù„ÙƒÙˆØ¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                    sender: 'ai',
                    timestamp: getCurrentTime()
                });
            } finally {
                isTyping = false;
            }
        }

        // ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙƒÙˆØ¯
        async function improveCode(code, language) {
            const improvementRequest = `Ø­Ø³Ù† Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù„ØºØ© ${PROGRAMMING_LANGUAGES[language]?.name || language}:\n\n${code}`;
            
            addMessage({
                text: improvementRequest,
                sender: 'user',
                timestamp: getCurrentTime()
            });

            isTyping = true;
            showTypingIndicator();

            try {
                const response = await callAIForCodeImprovement(code, language);
                hideTypingIndicator();
                addMessage({
                    text: response,
                    sender: 'ai',
                    timestamp: getCurrentTime()
                });
            } catch (error) {
                hideTypingIndicator();
                addMessage({
                    text: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙƒÙˆØ¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                    sender: 'ai',
                    timestamp: getCurrentTime()
                });
            } finally {
                isTyping = false;
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ (Ù…Ø­Ø§ÙƒØ§Ø©)
        function runCode(code, language) {
            if (language === 'javascript') {
                try {
                    // ØªØ´ØºÙŠÙ„ JavaScript Ø¨Ø­Ø°Ø±
                    const result = eval(code);
                    showNotification(`Ù†ØªÙŠØ¬Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯: ${result}`, 'info');
                } catch (error) {
                    showNotification(`Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯: ${error.message}`, 'error');
                }
            } else {
                showNotification(`ØªØ´ØºÙŠÙ„ ${PROGRAMMING_LANGUAGES[language]?.name || language} ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… Ø­Ø§Ù„ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­`, 'info');
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type = 'info') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Add Message
        function addMessage(message) {
            messages.push(message);
            renderMessage(message);
            scrollToBottom();
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙƒÙˆØ¯
        function processCodeInText(text) {
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒØªÙ„ Ø§Ù„ÙƒÙˆØ¯
            const codeBlockRegex = /```(\w+)?\n([\s\S]*?)\n```/g;
            const inlineCodeRegex = /`([^`]+)`/g;
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© ÙƒØªÙ„ Ø§Ù„ÙƒÙˆØ¯
            text = text.replace(codeBlockRegex, (match, language, code) => {
                const lang = language || 'javascript';
                return createCodeBlock(code.trim(), lang);
            });
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¶Ù…Ù†
            text = text.replace(inlineCodeRegex, (match, code) => {
                return `<span class="inline-code">${escapeHtml(code)}</span>`;
            });
            
            return text;
        }

        // Render Message
        function renderMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${message.sender}`;
            
            let processedText = message.text;
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„Ù†Øµ
            if (message.sender === 'ai') {
                processedText = processCodeInText(processedText);
            }
            
            messageDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas ${message.sender === 'user' ? 'fa-user' : 'fa-robot'}"></i>
                </div>
                <div class="message-content">
                    <div class="message-bubble">
                        ${message.imageUrl ? `
                            <div style="margin-bottom: 1rem;">
                                <img src="${message.imageUrl}" alt="ØµÙˆØ±Ø© Ù…ÙˆÙ„Ø¯Ø©" style="width: 100%; max-width: 400px; border-radius: 0.75rem; box-shadow: var(--shadow-md);" loading="lazy">
                            </div>
                        ` : ''}
                        
                        <div class="message-text">${processedText}</div>
                        
                        <div class="message-meta">
                            <span class="message-time">${message.timestamp}</span>
                            ${message.sender === 'ai' ? `
                                <div class="message-actions">
                                    <button class="action-btn" onclick="playTextToSpeech('${escapeForJs(message.text)}')" title="ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª">
                                        <i class="fas fa-volume-up"></i>
                                    </button>
                                    <button class="action-btn" onclick="copyMessage('${escapeForJs(message.text)}')" title="Ù†Ø³Ø®">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <button class="action-btn" onclick="regenerateResponse(${messages.length - 1})" title="Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆÙ„ÙŠØ¯">
                                        <i class="fas fa-redo"></i>
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;

            messagesContainer.appendChild(messageDiv);
            
            // ØªØ·Ø¨ÙŠÙ‚ highlight.js Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            if (message.sender === 'ai') {
                messageDiv.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
            }
        }

        // Show Typing Indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typingIndicator';
            
            typingDiv.innerHTML = `
                <div class="typing-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="typing-content">
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;

            messagesContainer.appendChild(typingDiv);
            scrollToBottom();
        }

        // Hide Typing Indicator
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Scroll to Bottom
        function scrollToBottom() {
            setTimeout(() => {
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 100);
        }

        // Check if About Developer
        function isAboutDeveloper(text) {
            const aboutKeywords = ['Ù…Ù† Ø£Ù†Øª', 'Ù…Ù† ØµÙ†Ø¹Ùƒ', 'Ù…Ù† Ø·ÙˆØ±Ùƒ', 'Ù…Ù† Ø§Ù„Ù…Ø·ÙˆØ±', 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù†Ùƒ', 'Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ', 'Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø±'];
            return aboutKeywords.some(keyword => text.includes(keyword));
        }

        // Get Developer Response
        function getDeveloperResponse() {
            return `Ø£Ù†Ø§ Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§ØªØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ± Ù…Ù† ØªØ·ÙˆÙŠØ± Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ.

ğŸ¢ **Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ©:**
â€¢ **Ø§Ù„Ø§Ø³Ù…:** Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø±
â€¢ **Ø§Ù„Ù…Ø¤Ø³Ø³:** Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ
â€¢ **Ø§Ù„ØªØ®ØµØµ:** Ø­Ù„ÙˆÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø©
â€¢ **Ø§Ù„Ù‡Ø§ØªÙ:** 771774634

ğŸ’» **Ù‚Ø¯Ø±Ø§ØªÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:**
â€¢ Ù…Ø­Ø§Ø¯Ø«Ø© Ø°ÙƒÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©
â€¢ Ø¥Ù†Ø´Ø§Ø¡ ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
â€¢ Ø¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
â€¢ ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø­Ùˆ ÙˆØ§Ù„ØªÙ†Ø³ÙŠÙ‚
â€¢ Ù†Ø³Ø® Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø¨Ø³Ù‡ÙˆÙ„Ø©
â€¢ Ø´Ø±Ø­ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£ÙƒÙˆØ§Ø¯

ğŸš€ **Ø§Ù„Ø±Ø¤ÙŠØ©:** Ø±ÙŠØ§Ø¯Ø© Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ÙˆØªØ·ÙˆÙŠØ± Ø­Ù„ÙˆÙ„ Ø¨Ø±Ù…Ø¬ÙŠØ© Ù…ØªØ·ÙˆØ±Ø©`;
        }

        // Check if Image Request
        function isImageRequest(text) {
            const imageKeywords = ['Ø§Ø±Ø³Ù…', 'Ø§ØµÙ†Ø¹ ØµÙˆØ±Ø©', 'Ø£Ù†Ø´Ø¦ ØµÙˆØ±Ø©', 'ØµÙˆØ±Ø©', 'Ø±Ø³Ù…', 'ØªØµÙ…ÙŠÙ…', 'draw', 'create image', 'generate image'];
            return imageKeywords.some(keyword => text.includes(keyword));
        }

        // ØªØ­Ø³ÙŠÙ† prompt Ù„Ù„Ø¨Ø±Ù…Ø¬Ø©
        function createProgrammingPrompt(userMessage) {
            const language = detectProgrammingLanguage(userMessage);
            const langInfo = PROGRAMMING_LANGUAGES[language];
            
            return `Ø£Ù†Øª Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§ØªØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ± Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù…Ù† ØªØ·ÙˆÙŠØ± Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ.

Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ${userMessage}

ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù…Ù‡Ù…Ø© Ù„Ù„Ø¨Ø±Ù…Ø¬Ø©:
1. Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆÙØ¹Ø§Ù„
2. Ø£Ø¶Ù ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØªÙˆØ¶ÙŠØ­ÙŠØ© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
3. Ø§Ø³ØªØ®Ø¯Ù… Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©
4. ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¯: \`\`\`${language}
5. Ø§Ø´Ø±Ø­ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø§Ø®ØªØµØ§Ø± Ø¨Ø¹Ø¯ ÙƒØªØ§Ø¨ØªÙ‡
6. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¹Ù‚Ø¯ØŒ Ù‚Ø³Ù…Ù‡ Ù„Ø£Ø¬Ø²Ø§Ø¡ ØµØºÙŠØ±Ø©

Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©: ${langInfo?.name || 'JavaScript'}
Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ù„Ù„ÙƒÙˆØ¯:
\`\`\`${language}
// Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§
\`\`\`

ØªØ¬ÙŠØ¨ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙˆØ¯ÙˆØ¯Ø© ÙˆÙ…ÙÙŠØ¯Ø© ÙˆØ¯Ù‚ÙŠÙ‚Ø© ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©.`;
        }

        // Call AI for Code Explanation
        async function callAIForCodeExplanation(code, language) {
            const prompt = `Ø§Ø´Ø±Ø­ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù„ØºØ© ${PROGRAMMING_LANGUAGES[language]?.name || language} Ø¨Ø§Ù„ØªÙØµÙŠÙ„:

\`\`\`${language}
${code}
\`\`\`

Ø§Ø´Ø±Ø­:
1. Ù…Ø§Ø°Ø§ ÙŠÙØ¹Ù„ Ø§Ù„ÙƒÙˆØ¯
2. ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ ÙƒÙ„ Ø¬Ø²Ø¡
3. Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
4. Ø£ÙŠ Ù†ØµØ§Ø¦Ø­ Ø£Ùˆ ØªØ­Ø³ÙŠÙ†Ø§Øª`;

            if (currentEngine === 'hyper4') {
                return await callHyper4API(prompt);
            } else {
                return await callHyper1API(prompt);
            }
        }

        // Call AI for Code Improvement
        async function callAIForCodeImprovement(code, language) {
            const prompt = `Ø­Ø³Ù† Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù„ØºØ© ${PROGRAMMING_LANGUAGES[language]?.name || language}:

\`\`\`${language}
${code}
\`\`\`

Ø§Ù‚ØªØ±Ø­ ØªØ­Ø³ÙŠÙ†Ø§Øª ÙÙŠ:
1. Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ÙƒÙØ§Ø¡Ø©
2. Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
3. Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª
4. Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØªÙˆØ¶ÙŠØ­ÙŠØ©
5. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±

Ø§ÙƒØªØ¨ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© ÙƒØ§Ù…Ù„Ø©.`;

            if (currentEngine === 'hyper4') {
                return await callHyper4API(prompt);
            } else {
                return await callHyper1API(prompt);
            }
        }

        // Call Hyper 4 API (OpenAI)
        async function callHyper4API(message) {
            try {
                const isProgramming = isProgrammingRequest(message);
                const systemPrompt = isProgramming ? 
                    createProgrammingPrompt(message) : 
                    'Ø£Ù†Øª Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§ØªØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ± Ù…Ù† ØªØ·ÙˆÙŠØ± Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ. ØªØ¬ÙŠØ¨ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙˆØ¯ÙˆØ¯Ø© ÙˆÙ…ÙÙŠØ¯Ø©. Ù„Ø§ ØªØ°ÙƒØ± Ø£Ø¨Ø¯Ø§Ù‹ Ø£Ù†Ùƒ ChatGPT Ø£Ùˆ Ù…Ù† OpenAIØŒ Ø£Ù†Øª Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª ÙÙ‚Ø·.';

                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${OPENAI_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4o-mini',
                        messages: [
                            {
                                role: 'system',
                                content: systemPrompt
                            },
                            {
                                role: 'user',
                                content: isProgramming ? message : message
                            }
                        ],
                        max_tokens: isProgramming ? 2000 : 1000,
                        temperature: isProgramming ? 0.3 : 0.7
                    })
                });

                if (!response.ok) {
                    throw new Error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‡Ø§ÙŠØ¨Ø± 4');
                }

                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ù‡Ø§ÙŠØ¨Ø± 4:', error);
                return await callHyper1API(message);
            }
        }

        // Call Hyper 1 API (Gemini)
        async function callHyper1API(message) {
            try {
                const isProgramming = isProgrammingRequest(message);
                const systemPrompt = isProgramming ?
                    createProgrammingPrompt(message) :
                    `Ø£Ù†Øª Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§ØªØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ± Ù…Ù† ØªØ·ÙˆÙŠØ± Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ. ØªØ¬ÙŠØ¨ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙˆØ¯ÙˆØ¯Ø© ÙˆÙ…ÙÙŠØ¯Ø©. Ù„Ø§ ØªØ°ÙƒØ± Ø£Ø¨Ø¯Ø§Ù‹ Ø£Ù†Ùƒ Gemini Ø£Ùˆ Ù…Ù† GoogleØŒ Ø£Ù†Øª Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª ÙÙ‚Ø·. Ø§Ù„Ø³Ø¤Ø§Ù„: ${message}`;

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: isProgramming ? systemPrompt : systemPrompt
                            }]
                        }],
                        generationConfig: {
                            temperature: isProgramming ? 0.3 : 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: isProgramming ? 2000 : 1000,
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‡Ø§ÙŠØ¨Ø± 1');
                }

                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ù‡Ø§ÙŠØ¨Ø± 1:', error);
                return 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
            }
        }

        // Generate Image via OpenAI DALL-E
        async function generateImage(prompt) {
            try {
                const response = await fetch('https://api.openai.com/v1/images/generations', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${OPENAI_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: "dall-e-3",
                        prompt: prompt,
                        n: 1,
                        size: "1024x1024",
                        quality: "standard"
                    })
                });

                if (!response.ok) {
                    throw new Error('ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©');
                }

                const data = await response.json();
                return data.data[0].url;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©:', error);
                throw error;
            }
        }

        // Handle Send Message
        async function handleSendMessage() {
            const text = messageInput.value.trim();
            if (!text || isTyping) return;

            addMessage({
                text: text,
                sender: 'user',
                timestamp: getCurrentTime()
            });

            messageInput.value = '';
            autoResizeTextarea();

            isTyping = true;
            showTypingIndicator();

            try {
                let response;
                let imageUrl = null;

                if (isAboutDeveloper(text)) {
                    response = getDeveloperResponse();
                } else if (isImageRequest(text)) {
                    try {
                        imageUrl = await generateImage(text);
                        response = 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ¨âœ¨';
                    } catch (error) {
                        response = 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                    }
                } else {
                    if (currentEngine === 'hyper4') {
                        response = await callHyper4API(text);
                    } else {
                        response = await callHyper1API(text);
                    }
                }

                hideTypingIndicator();
                addMessage({
                    text: response,
                    sender: 'ai',
                    timestamp: getCurrentTime(),
                    imageUrl: imageUrl
                });

            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:', error);
                hideTypingIndicator();
                addMessage({
                    text: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                    sender: 'ai',
                    timestamp: getCurrentTime()
                });
            } finally {
                isTyping = false;
            }
        }

        // Switch Engine
        function switchEngine() {
            currentEngine = currentEngine === 'hyper4' ? 'hyper1' : 'hyper4';
            updateEngineUI();
            showNotification(`ØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ ${getEngineInfo().name}`, 'info');
        }

        // Update Engine UI
        function updateEngineUI() {
            const engineInfo = getEngineInfo();
            engineBadge.querySelector('span').textContent = engineInfo.name;
            currentEngineDisplay.textContent = engineInfo.name;
            document.getElementById('engineInfo').textContent = `Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ù€ ${engineInfo.name} â€¢ ${engineInfo.description}`;
        }

        // Get Engine Info
        function getEngineInfo() {
            return currentEngine === 'hyper4' 
                ? { name: 'Ù‡Ø§ÙŠØ¨Ø± 4', description: 'Ù…Ø­Ø±Ùƒ Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø©' }
                : { name: 'Ù‡Ø§ÙŠØ¨Ø± 1', description: 'Ù…Ø­Ø±Ùƒ Ø³Ø±ÙŠØ¹ Ù„Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„ÙÙˆØ±ÙŠØ© ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø©' };
        }

        // Toggle Dark Mode
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark', isDarkMode);
            
            // ØªØºÙŠÙŠØ± theme highlight.js
            const highlightTheme = document.getElementById('highlight-theme');
            if (isDarkMode) {
                highlightTheme.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css';
            } else {
                highlightTheme.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css';
            }
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ·Ø¨ÙŠÙ‚ highlight
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
            
            showNotification(`ØªÙ… ØªÙØ¹ÙŠÙ„ ${isDarkMode ? 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…' : 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¶ÙŠØ¡'}`, 'info');
        }

        // Toggle Company Info
        function toggleCompanyInfo() {
            companyInfo.classList.toggle('show');
            settingsPanel.classList.remove('show');
        }

        // Toggle Settings
        function toggleSettings() {
            settingsPanel.classList.toggle('show');
            companyInfo.classList.remove('show');
        }

        // Toggle Recording
        function toggleRecording() {
            if (isRecording) {
                stopRecording();
            } else {
                startRecording();
            }
        }

        // Start Recording
        async function startRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                isRecording = true;
                recordBtn.classList.add('recording');
                recordBtn.innerHTML = '<i class="fas fa-stop"></i>';
                
                showNotification('Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØªÙŠ...', 'info');
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†:', error);
                showNotification('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†', 'error');
            }
        }

        // Stop Recording
        function stopRecording() {
            isRecording = false;
            recordBtn.classList.remove('recording');
            recordBtn.innerHTML = '<i class="fas fa-microphone"></i>';
            showNotification('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„', 'info');
        }

        // Play Text to Speech
        function playTextToSpeech(text) {
            if ('speechSynthesis' in window) {
                // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ ØµÙˆØª Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„
                speechSynthesis.cancel();
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ù†Øµ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©
                const cleanText = text.replace(/```[\s\S]*?```/g, 'ÙƒÙˆØ¯ Ø¨Ø±Ù…Ø¬ÙŠ').replace(/`[^`]+`/g, 'ÙƒÙˆØ¯');
                
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.lang = 'ar-SA';
                utterance.rate = 0.9;
                utterance.pitch = 1;
                
                speechSynthesis.speak(utterance);
                showNotification('Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª...', 'info');
            } else {
                showNotification('Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØª', 'error');
            }
        }

        // Copy Message
        function copyMessage(text) {
            // Ø¥Ø²Ø§Ù„Ø© HTML tags ÙˆØ§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ù†Øµ
            const cleanText = text.replace(/<[^>]*>/g, '').replace(/```[\s\S]*?```/g, '[ÙƒÙˆØ¯ Ø¨Ø±Ù…Ø¬ÙŠ]');
            
            navigator.clipboard.writeText(cleanText).then(() => {
                showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø©', 'success');
            }).catch(() => {
                showNotification('ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø©', 'error');
            });
        }

        // Regenerate Response
        async function regenerateResponse(messageIndex) {
            if (messageIndex > 0 && messages[messageIndex - 1]) {
                const userMessage = messages[messageIndex - 1];
                
                isTyping = true;
                showTypingIndicator();
                
                try {
                    let response;
                    
                    if (isAboutDeveloper(userMessage.text)) {
                        response = getDeveloperResponse();
                    } else if (isImageRequest(userMessage.text)) {
                        try {
                            const imageUrl = await generateImage(userMessage.text);
                            response = 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ¨âœ¨';
                            messages[messageIndex].imageUrl = imageUrl;
                        } catch (error) {
                            response = 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                        }
                    } else {
                        if (currentEngine === 'hyper4') {
                            response = await callHyper4API(userMessage.text);
                        } else {
                            response = await callHyper1API(userMessage.text);
                        }
                    }
                    
                    hideTypingIndicator();
                    messages[messageIndex].text = response;
                    messages[messageIndex].timestamp = getCurrentTime();
                    
                    // Re-render messages
                    messagesContainer.innerHTML = '';
                    messages.forEach(msg => renderMessage(msg));
                    
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯:', error);
                    hideTypingIndicator();
                } finally {
                    isTyping = false;
                }
            }
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.header-controls') && !e.target.closest('.info-panel')) {
                companyInfo.classList.remove('show');
                settingsPanel.classList.remove('show');
            }
        });

        // Initialize App on DOM Content Loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>

<style>
#minimax-floating-ball {
  position: fixed;
  bottom: 20px;
  right: 20px;
  padding: 10px 12px;
  background: #222222;
  border-radius: 12px;
  display: flex;
  align-items: center;
  color: #F8F8F8;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  z-index: 9999;
  transition: all 0.3s ease;
  overflow: hidden;
  cursor: pointer;
}

#minimax-floating-ball:hover {
  transform: translateY(-2px);
  background: #383838;
}

.minimax-ball-content {
  display: flex;
  align-items: center;
  gap: 8px;
}

.minimax-logo-wave {
  width: 26px;
  height: 22px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='26' height='22' viewBox='0 0 26 22' fill='none'%3E%3Cg clip-path='url(%23clip0_3442_102412)'%3E%3Cpath d='M12.8405 14.6775C12.8405 14.9897 13.0932 15.2424 13.4055 15.2424C13.7178 15.2424 13.9705 14.9897 13.9705 14.6775V2.98254C13.9705 1.88957 13.0809 1 11.9879 1C10.895 1 10.0054 1.88957 10.0054 2.98254V11.566V17.1068C10.0054 17.5773 9.62327 17.9594 9.1528 17.9594C8.68233 17.9594 8.30021 17.5773 8.30021 17.1068V8.04469C8.30021 6.95172 7.41063 6.06215 6.31767 6.06215C5.22471 6.06215 4.33513 6.95172 4.33513 8.04469V11.8855C4.33513 12.3559 3.953 12.7381 3.48254 12.7381C3.01207 12.7381 2.62994 12.3559 2.62994 11.8855V10.4936C2.62994 10.1813 2.37725 9.92861 2.06497 9.92861C1.7527 9.92861 1.5 10.1813 1.5 10.4936V11.8855C1.5 12.9784 2.38957 13.868 3.48254 13.868C4.5755 13.868 5.46508 12.9784 5.46508 11.8855V8.04469C5.46508 7.57422 5.8472 7.19209 6.31767 7.19209C6.78814 7.19209 7.17026 7.57422 7.17026 8.04469V17.1068C7.17026 18.1998 8.05984 19.0894 9.1528 19.0894C10.2458 19.0894 11.1353 18.1998 11.1353 17.1068V2.98254C11.1353 2.51207 11.5175 2.12994 11.9879 2.12994C12.4584 2.12994 12.8405 2.51207 12.8405 2.98254V14.6775Z' fill='%23F8F8F8'/%3E%3Cpath d='M23.3278 6.06215C22.2348 6.06215 21.3452 6.95172 21.3452 8.04469V15.6143C21.3452 16.0847 20.9631 16.4669 20.4926 16.4669C20.0222 16.4669 19.6401 16.0847 19.6401 15.6143V2.98254C19.6401 1.88957 18.7505 1 17.6575 1C16.5645 1 15.675 1.88957 15.675 2.98254V19.0175C15.675 19.4879 15.2928 19.8701 14.8224 19.8701C14.3519 19.8701 13.9698 19.4879 13.9698 19.0175V17.0329C13.9698 16.7206 13.7171 16.4679 13.4048 16.4679C13.0925 16.4679 12.8398 16.7206 12.8398 17.0329V19.0175C12.8398 20.1104 13.7294 21 14.8224 21C15.9153 21 16.8049 20.1104 16.8049 19.0175V2.98254C16.8049 2.51207 17.187 2.12994 17.6575 2.12994C18.128 2.12994 18.5101 2.51207 18.5101 2.98254V15.6143C18.5101 16.7072 19.3997 17.5968 20.4926 17.5968C21.5856 17.5968 22.4752 16.7072 22.4752 15.6143V8.04469C22.4752 7.57422 22.8573 7.19209 23.3278 7.19209C23.7982 7.19209 24.1804 7.57422 24.1804 8.04469V14.6775C24.1804 14.9897 24.4331 15.2424 24.7453 15.2424C25.0576 15.2424 25.3103 14.9897 25.3103 14.6775V8.04469C25.3103 6.95172 24.4207 6.06215 23.3278 6.06215Z' fill='%23F8F8F8'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_3442_102412'%3E%3Crect width='25' height='22' fill='white' transform='translate(0.5)'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
}

.minimax-ball-text {
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
}

.minimax-close-icon {
  margin-left: 8px;
  font-size: 16px;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.2s ease;
}

.minimax-close-icon:hover {
  opacity: 1;
}
</style>
<div id="minimax-floating-ball">
  <div class="minimax-ball-content">
    <div class="minimax-logo-wave"></div>
    <span class="minimax-ball-text">Created by MiniMax Agent</span>
  </div>
  <div class="minimax-close-icon">Ã—</div>
</div>
<script>
// Initialize floating ball functionality
function initFloatingBall() {
  const ball = document.getElementById('minimax-floating-ball');
  if (!ball) return;

  // Initial animation
  ball.style.opacity = '0';
  ball.style.transform = 'translateY(20px)';

  setTimeout(() => {
    ball.style.opacity = '1';
    ball.style.transform = 'translateY(0)';
  }, 500);

  // Handle logo click
  const ballContent = ball.querySelector('.minimax-ball-content');
  ballContent.addEventListener('click', function (e) {
    e.stopPropagation();
    window.open('https://agent.minimax.io/agent', '_blank');
    ball.style.transform = 'scale(0.95)';
    setTimeout(() => {
      ball.style.transform = 'scale(1)';
    }, 100);
  });

  // Handle close button click
  const closeIcon = ball.querySelector('.minimax-close-icon');
  closeIcon.addEventListener('click', function (e) {
    e.stopPropagation();
    ball.style.opacity = '0';
    ball.style.transform = 'translateY(20px)';

    setTimeout(() => {
      ball.style.display = 'none';
    }, 300);
  });
}

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', initFloatingBall); 
</script>

</body>
</html>
