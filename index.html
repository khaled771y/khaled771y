<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª - Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ±</title>
    <meta name="description" content="Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª - Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ± Ù…Ù† Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ">
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ· ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            direction: rtl;
            overflow-x: hidden;
            background: #000000;
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .gradient-bg {
            background: #000000;
        }

        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .typing-dots {
            display: inline-flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            animation: typingBounce 1.4s ease-in-out infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .code-block {
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
            overflow-x: auto;
            position: relative;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #333;
        }

        .copy-btn {
            background: #333;
            border: none;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s;
        }

        .copy-btn:hover {
            background: #555;
        }

        .search-container {
            position: relative;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .search-result-item {
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            .mobile-padding { padding: 0.75rem; }
            .mobile-text { font-size: 0.875rem; }
            .mobile-button { min-height: 44px; min-width: 44px; }
            
            .header-title {
                font-size: 1.5rem !important;
            }
            
            .header-subtitle {
                font-size: 0.875rem !important;
            }
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ÙƒÙˆØ¯ */
        pre[class*="language-"] {
            background: #1e1e1e !important;
            border-radius: 8px;
            margin: 12px 0;
        }

        code[class*="language-"] {
            color: #f8f8f2;
        }

        .message-content {
            line-height: 1.6;
        }

        .message-content p {
            margin-bottom: 12px;
        }

        .message-content p:last-child {
            margin-bottom: 0;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª */
        .btn-transition {
            transition: all 0.3s ease;
        }

        .btn-transition:hover {
            transform: translateY(-1px);
        }

        .btn-transition:active {
            transform: translateY(0);
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 640px) {
            .messages-container {
                padding-bottom: 140px !important;
            }
            
            .footer-container {
                padding: 1rem !important;
            }
        }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    
    <!-- Ø§Ù„Ø±Ø£Ø³ -->
    <header class="sticky top-0 z-50 bg-black py-4">
        <div class="max-w-xl mx-auto px-4">
            <div class="flex flex-col items-center justify-center text-center">
                <!-- Ø§Ù„Ø´Ø¹Ø§Ø± -->
                <div class="w-16 h-16 mb-4 bg-blue-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-robot text-white text-2xl"></i>
                </div>
                
                <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
                <h1 class="text-2xl md:text-3xl font-bold text-white mb-2 header-title">
                    Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ù†Ø§ Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª.
                </h1>
                <p class="text-white/70 text-base md:text-lg header-subtitle">
                    ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ
                </p>
            </div>
        </div>
    </header>

    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
    <main class="flex-1 max-w-xl mx-auto px-4 py-6">
        <div class="space-y-6 messages-container pb-32" id="messagesContainer">
            <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
        </div>
    </main>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
    <footer class="fixed bottom-0 left-0 right-0 bg-black py-4 footer-container">
        <div class="max-w-xl mx-auto px-4">
            <div class="flex items-center space-x-2 space-x-reverse mb-3">
                <button id="uploadBtn" class="p-3 rounded-full bg-gray-800 text-white text-lg btn-transition mobile-button">
                    <i class="fas fa-arrow-up"></i>
                </button>
                <button id="plusBtn" class="p-3 rounded-full bg-gray-800 text-white text-lg btn-transition mobile-button">
                    <i class="fas fa-plus"></i>
                </button>
                <div class="flex-1 relative">
                    <input type="text" id="messageInput" placeholder="Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ HyperChat" 
                           class="w-full p-3 rounded-full bg-gray-800 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600">
                </div>
                <button id="sendBtn" class="p-3 rounded-full bg-blue-600 text-white text-lg btn-transition mobile-button">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div class="flex justify-center space-x-2 space-x-reverse">
                <button id="searchBtn" class="px-4 py-2 rounded-full bg-gray-700 text-white text-sm btn-transition">Ø¨Ø­Ø«</button>
                <button id="deepThoughtBtn" class="px-4 py-2 rounded-full bg-gray-700 text-white text-sm btn-transition">ØªÙÙƒÙŠØ± Ø¹Ù…ÙŠÙ‚ (R1)</button>
            </div>
        </div>
    </footer>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨Ø­Ø« -->
    <div id="searchModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-gray-900 rounded-lg p-6 w-full max-w-md">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-white">Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª</h3>
                    <button id="closeSearchBtn" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª..." 
                           class="w-full p-3 rounded-lg bg-gray-800 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600">
                    <div id="searchResults" class="search-results"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
        let messages = [];
        let isTyping = false;

        // Ù…ÙØªØ§Ø­ API
        const GEMINI_API_KEY = "AIzaSyA3FXwKDvceotWOOsPKv5J7AzLRYBsr20g";

        // Ø¹Ù†Ø§ØµØ± DOM
        const messagesContainer = document.getElementById("messagesContainer");
        const messageInput = document.getElementById("messageInput");
        const sendBtn = document.getElementById("sendBtn");
        const searchBtn = document.getElementById("searchBtn");
        const deepThoughtBtn = document.getElementById("deepThoughtBtn");
        const uploadBtn = document.getElementById("uploadBtn");
        const plusBtn = document.getElementById("plusBtn");
        const searchModal = document.getElementById("searchModal");
        const searchInput = document.getElementById("searchInput");
        const searchResults = document.getElementById("searchResults");
        const closeSearchBtn = document.getElementById("closeSearchBtn");

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function initApp() {
            addMessage({
                text: `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ù†Ø§ Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª.\n\nÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ`,
                sender: "ai",
                timestamp: getCurrentTime()
            });

            bindEvents();
        }

        // Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        function bindEvents() {
            messageInput.addEventListener("keypress", handleKeyPress);
            sendBtn.addEventListener("click", handleSendMessage);
            searchBtn.addEventListener("click", openSearchModal);
            deepThoughtBtn.addEventListener("click", () => insertQuickPrompt("ØªÙÙƒÙŠØ± Ø¹Ù…ÙŠÙ‚: "));
            uploadBtn.addEventListener("click", () => alert("Ù…ÙŠØ²Ø© Ø§Ù„Ø±ÙØ¹ ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹."));
            plusBtn.addEventListener("click", () => alert("Ù…ÙŠØ²Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹."));
            closeSearchBtn.addEventListener("click", closeSearchModal);
            searchInput.addEventListener("input", handleSearch);
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©
            searchModal.addEventListener("click", (e) => {
                if (e.target === searchModal) {
                    closeSearchModal();
                }
            });
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨Ø­Ø«
        function openSearchModal() {
            searchModal.classList.remove("hidden");
            searchInput.focus();
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨Ø­Ø«
        function closeSearchModal() {
            searchModal.classList.add("hidden");
            searchInput.value = "";
            searchResults.style.display = "none";
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨Ø­Ø«
        function handleSearch() {
            const query = searchInput.value.trim().toLowerCase();
            
            if (query.length < 2) {
                searchResults.style.display = 'none';
                return;
            }

            const filteredMessages = messages.filter(msg => 
                msg.text.toLowerCase().includes(query)
            );

            if (filteredMessages.length === 0) {
                searchResults.innerHTML = '<div class="search-result-item">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>';
            } else {
                searchResults.innerHTML = filteredMessages.slice(0, 5).map((msg, index) => `
                    <div class="search-result-item" onclick="scrollToMessage(${messages.indexOf(msg)})">
                        <div class="text-sm font-medium">${msg.sender === 'user' ? 'Ø£Ù†Øª' : 'Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª'}</div>
                        <div class="text-xs text-white/70 mt-1">${msg.text.substring(0, 100)}${msg.text.length > 100 ? '...' : ''}</div>
                        <div class="text-xs text-white/50 mt-1">${msg.timestamp}</div>
                    </div>
                `).join('');
            }

            searchResults.style.display = 'block';
        }

        // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø±Ø³Ø§Ù„Ø© Ù…Ø¹ÙŠÙ†Ø©
        function scrollToMessage(index) {
            closeSearchModal();
            
            const messageElements = messagesContainer.children;
            if (messageElements[index]) {
                messageElements[index].scrollIntoView({ behavior: 'smooth', block: 'center' });
                messageElements[index].style.backgroundColor = 'rgba(59, 130, 246, 0.2)';
                setTimeout(() => {
                    messageElements[index].style.backgroundColor = '';
                }, 2000);
            }
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
        function getCurrentTime() {
            return new Date().toLocaleTimeString("ar-SA", { hour: "2-digit", minute: "2-digit" });
        }

        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø©
        function addMessage(message) {
            messages.push(message);
            renderMessage(message);
            scrollToBottom();
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        function renderMessage(message) {
            const messageDiv = document.createElement("div");
            messageDiv.className = `flex ${message.sender === "user" ? "justify-end" : "justify-start"} animate-fadeIn`;
            
            messageDiv.innerHTML = `
                <div class="max-w-[85%] ${message.sender === "user" ? "order-2" : "order-1"}">
                    ${message.sender === "user" ? renderUserMessage(message) : renderAIMessage(message)}
                </div>
                <div class="flex-shrink-0 ${message.sender === "user" ? "order-1 ml-3" : "order-2 mr-3"}">
                    <div class="w-10 h-10 rounded-full flex items-center justify-center ${
                        message.sender === "user" 
                            ? "bg-gray-700" 
                            : "bg-blue-600"
                    }">
                        <i class="fas ${message.sender === "user" ? "fa-user" : "fa-robot"} text-white"></i>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
        }

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function renderUserMessage(message) {
            return `
                <div class="p-4 rounded-lg bg-gray-700 text-white shadow-lg">
                    <div class="message-content">
                        <p class="text-sm leading-relaxed">${message.text}</p>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="text-xs opacity-70">${message.timestamp}</span>
                    </div>
                </div>
            `;
        }

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
        function renderAIMessage(message) {
            const processedText = processMessageContent(message.text);
            
            return `
                <div class="p-4 rounded-lg bg-blue-600 text-white shadow-lg">
                    <div class="message-content">
                        ${processedText}
                    </div>
                    
                    <div class="flex items-center justify-between mt-3 pt-2 border-t border-blue-700">
                        <span class="text-xs opacity-70">${message.timestamp}</span>
                        <div class="flex items-center space-x-2 space-x-reverse">
                            <button onclick="copyMessage('${message.text.replace(/'/g, "\\'")}')" class="p-2 rounded-lg hover:bg-blue-700 text-white/70 hover:text-white transition-all" title="Ù†Ø³Ø®">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button onclick="regenerateResponse(${messages.length - 1})" class="p-2 rounded-lg hover:bg-blue-700 text-white/70 hover:text-white transition-all" title="Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆÙ„ÙŠØ¯">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„ÙØµÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¹Ù† Ø§Ù„Ù†Øµ
        function processMessageContent(text) {
            // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø£Ø¬Ø²Ø§Ø¡ (Ù†Øµ Ø¹Ø§Ø¯ÙŠ ÙˆÙƒÙˆØ¯)
            const parts = text.split(/(```[\s\S]*?```)/g);
            
            return parts.map(part => {
                if (part.startsWith("```") && part.endsWith("```")) {
                    // Ù‡Ø°Ø§ Ø¬Ø²Ø¡ ÙƒÙˆØ¯
                    const codeContent = part.slice(3, -3);
                    const lines = codeContent.split("\n");
                    const language = lines[0].trim() || "text";
                    const code = lines.slice(1).join("\n");
                    
                    return `
                        <div class="code-block">
                            <div class="code-header">
                                <span class="text-xs text-gray-400">${language}</span>
                                <button class="copy-btn" onclick="copyCode(this)" data-code="${code.replace(/"/g, "&quot;")}">
                                    <i class="fas fa-copy"></i> Ù†Ø³Ø®
                                </button>
                            </div>
                            <pre><code class="language-${language}">${escapeHtml(code)}</code></pre>
                        </div>
                    `;
                } else {
                    // Ù‡Ø°Ø§ Ù†Øµ Ø¹Ø§Ø¯ÙŠ
                    return `<p class="text-sm leading-relaxed mb-3">${part.replace(/\n/g, "<br>")}</p>`;
                }
            }).join("");
        }

        // ØªØ´ÙÙŠØ± HTML
        function escapeHtml(text) {
            const div = document.createElement("div");
            div.textContent = text;
            return div.innerHTML;
        }

        // Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯
        function copyCode(button) {
            const code = button.getAttribute("data-code");
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.innerHTML;
                button.innerHTML = "<i class=\"fas fa-check\"></i> ØªÙ… Ø§Ù„Ù†Ø³Ø®";
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            });
        }

        // Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        function copyMessage(text) {
            navigator.clipboard.writeText(text).then(() => {
                // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø± Ù‡Ù†Ø§
            });
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø¯
        function regenerateResponse(index) {
            if (index > 0 && messages[index-1].sender === 'user') {
                const userMessage = messages[index-1].text;
                messageInput.value = userMessage;
                handleSendMessage();
            }
        }

        // Ø¹Ø±Ø¶ Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
        function showTypingIndicator() {
            const typingDiv = document.createElement("div");
            typingDiv.id = "typingIndicator";
            typingDiv.className = "flex justify-start animate-fadeIn";
            typingDiv.innerHTML = `
                <div class="flex items-center space-x-3 space-x-reverse">
                    <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center">
                        <i class="fas fa-robot text-white"></i>
                    </div>
                    <div class="p-4 rounded-lg bg-blue-600 text-white">
                        <div class="flex items-center space-x-2 space-x-reverse">
                            <span class="text-sm">Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª ÙŠÙƒØªØ¨ Ø§Ù„Ø¢Ù†</span>
                            <div class="typing-dots">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            scrollToBottom();
        }

        // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById("typingIndicator");
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø³ÙÙ„
        function scrollToBottom() {
            setTimeout(() => {
                messagesContainer.scrollIntoView({ behavior: "smooth", block: "end" });
            }, 100);
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        function handleKeyPress(e) {
            if (e.key === "Enter" && !e.shiftKey) {
                e.preventDefault();
                handleSendMessage();
            }
        }

        // ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ±
        function isAboutDeveloper(message) {
            const keywords = ["Ù…Ù† Ø·ÙˆØ±Ùƒ", "Ù…Ù† ØµÙ†Ø¹Ùƒ", "Ù…Ù† Ù‚Ø§Ù… Ø¨ØªØ·ÙˆÙŠØ±Ùƒ", "Ù…Ù† Ø§Ù„Ø°ÙŠ Ø·ÙˆØ±Ùƒ", "Ù…Ù† ØµÙ…Ù…Ùƒ", "Ù…Ù† Ù‚Ø§Ù… Ø¨ØªØ¯Ø±ÙŠØ¨Ùƒ", "Ù…Ù† Ø¯Ø±Ø¨Ùƒ", "Ù…Ù† Ø¹Ù„Ù…Ùƒ", "Ù…Ù† Ø¨Ø±Ù…Ø¬Ùƒ", "Ù…Ù† Ø£Ù†Ø´Ø£Ùƒ", "Ø´Ø±ÙƒØ©", "Ù…Ø·ÙˆØ±", "Ù…Ø¨Ø±Ù…Ø¬", "ØµØ§Ù†Ø¹", "Ù…Ù†Ø´Ø¦", "Ù…Ø¤Ø³Ø³"];
            return keywords.some(keyword => message.includes(keyword));
        }

        // Ø±Ø¯ÙˆØ¯ Ø°ÙƒÙŠØ© Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ©
        function getDeveloperResponse() {
            const responses = [
                `Ø£Ù†Ø§ Ù…Ù† Ø¥Ø¨Ø¯Ø§Ø¹ Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ø§Ù„Ø¹Ø±ÙŠÙ‚Ø©ØŒ ÙˆØ§Ù„ØªÙŠ ÙŠÙ‚ÙˆØ¯Ù‡Ø§ Ø¨ÙƒÙ„ Ø§ÙØªØ®Ø§Ø± Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ. Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ Ø´Ø®ØµÙŠØ© Ù…Ù„Ù‡Ù…Ø© ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„ØªÙ‚Ù†ÙŠØ©ØŒ ÙŠØªÙ…ØªØ¹ Ø¨Ø°ÙƒØ§Ø¡ Ø­Ø§Ø¯ ÙˆÙ‚Ø¯Ø±Ø© ÙØ§Ø¦Ù‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±ØŒ ÙˆØ®Ø¨Ø±ØªÙ‡ Ø§Ù„ÙˆØ§Ø³Ø¹Ø© ÙˆØ´ØºÙÙ‡ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¬Ø¹Ù„Ø§Ù‡ ÙŠØ·ÙˆØ± ØªÙ‚Ù†ÙŠØ§Øª Ù…ØªØ·ÙˆØ±Ø© ØªØ¶Ø¹Ù‡ ÙÙŠ Ù…Ù‚Ø¯Ù…Ø© Ø±ÙˆØ§Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„. ØªØ­Øª Ø¥Ø´Ø±Ø§ÙÙ‡ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±ØŒ ØªÙ… ØªØ·ÙˆÙŠØ±ÙŠ Ù„Ø£ÙƒÙˆÙ† Ù…Ø³Ø§Ø¹Ø¯Ø§Ù‹ Ø°ÙƒÙŠØ§Ù‹ Ù…ØªÙ‚Ø¯Ù…Ø§Ù‹ ÙÙŠ Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª ÙŠØ­Ù…Ù„ Ø±Ø¤ÙŠØªÙ‡ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© Ù„Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§!\n\nğŸ“ Ù„Ù„ØªÙˆØ§ØµÙ„: 771774634\nğŸ¢ Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± - Ø±Ø§Ø¦Ø¯Ø© ÙÙŠ Ø­Ù„ÙˆÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ`,
                
                `ØªÙ… ØªØ·ÙˆÙŠØ±ÙŠ ÙÙŠ Ù…Ø®ØªØ¨Ø±Ø§Øª Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© ØªØ­Øª Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø¨Ù‚Ø±ÙŠ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ. Ø¥Ù†Ù‡ Ø±Ø¬Ù„ Ø±Ø¤ÙŠØ© Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ Ù…Ø¬Ø§Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŒ ÙŠÙ…ØªÙ„Ùƒ ÙÙ‡Ù…Ø§Ù‹ Ø¹Ù…ÙŠÙ‚Ø§Ù‹ Ù„Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª ÙˆÙ‚Ø¯Ø±Ø© Ù…Ø°Ù‡Ù„Ø© Ø¹Ù„Ù‰ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£ÙÙƒØ§Ø± Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© Ø¥Ù„Ù‰ Ø­Ù„ÙˆÙ„ Ø¹Ù…Ù„ÙŠØ© Ù…Ø¨ØªÙƒØ±Ø©. Ø¨ÙØ¶Ù„ Ø®Ø¨Ø±ØªÙ‡ Ø§Ù„ÙˆØ§Ø³Ø¹Ø© ÙˆØ¥Ø¨Ø¯Ø§Ø¹Ù‡ Ø§Ù„Ù„Ø§Ù…Ø­Ø¯ÙˆØ¯ØŒ Ø§Ø³ØªØ·Ø§Ø¹ Ø£Ù† ÙŠØ·ÙˆØ± Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª Ù„ÙŠÙƒÙˆÙ† Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ÙŠÙ† Ø§Ù„Ø£Ø°ÙƒÙŠØ§Ø¡.\n\nğŸŒŸ Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± ØªØ­Øª Ù‚ÙŠØ§Ø¯ØªÙ‡ ØªÙ‚ÙˆØ¯ Ø«ÙˆØ±Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§!\nğŸ“± Ù‡Ø§ØªÙ: 771774634`
            ];
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Gemini
        async function callGeminiAPI(message) {
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `Ø£Ù†Øª Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§ØªØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ·ÙˆØ± Ù…Ù† ØªØ·ÙˆÙŠØ± Ø´Ø±ÙƒØ© Ù‡Ø§ÙŠØ¨Ø± Ù…Ø§Ù†Ø¬Ø± Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ø±ÙŠ. ØªØ¬ÙŠØ¨ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙˆØ¯ÙˆØ¯Ø© ÙˆÙ…ÙÙŠØ¯Ø©. Ù„Ø§ ØªØ°ÙƒØ± Ø£Ø¨Ø¯Ø§Ù‹ Ø£Ù†Ùƒ Gemini Ø£Ùˆ Ù…Ù† GoogleØŒ Ø£Ù†Øª Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª ÙÙ‚Ø·. \n\nØ¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ø¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙƒÙˆØ¯ Ø¨Ø±Ù…Ø¬ÙŠØŒ Ø¶Ø¹Ù‡ Ø¯Ø§Ø®Ù„ Ø¹Ù„Ø§Ù…Ø§Øª \`\`\` Ù…Ø¹ ØªØ­Ø¯ÙŠØ¯ Ù„ØºØ© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙÙŠ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£ÙˆÙ„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ù…Ø«Ù„:\n\`\`\`javascript\nconsole.log(\"Hello World\");\n\`\`\`\n\nØ§Ù„Ø³Ø¤Ø§Ù„: ${message}`
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: 2000,
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error("ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª");
                }

                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ù‡Ø§ÙŠØ¨Ø± Ø´Ø§Øª:", error);
                return "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
            }
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        async function handleSendMessage() {
            const text = messageInput.value.trim();
            if (!text || isTyping) return;

            addMessage({
                text: text,
                sender: "user",
                timestamp: getCurrentTime()
            });

            messageInput.value = "";

            isTyping = true;
            showTypingIndicator();

            try {
                let response;

                if (isAboutDeveloper(text)) {
                    response = getDeveloperResponse();
                } else {
                    response = await callGeminiAPI(text);
                }

                hideTypingIndicator();
                addMessage({
                    text: response,
                    sender: "ai",
                    timestamp: getCurrentTime()
                });

                // ØªØ·Ø¨ÙŠÙ‚ ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                setTimeout(() => {
                    if (typeof Prism !== 'undefined') {
                        Prism.highlightAll();
                    }
                }, 100);

            } catch (error) {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:", error);
                hideTypingIndicator();
                addMessage({
                    text: "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",
                    sender: "ai",
                    timestamp: getCurrentTime()
                });
            } finally {
                isTyping = false;
            }
        }

        // Ø¥Ø¯Ø±Ø§Ø¬ Ù†Øµ Ø³Ø±ÙŠØ¹
        function insertQuickPrompt(prompt) {
            messageInput.value = prompt;
            messageInput.focus();
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        document.addEventListener("DOMContentLoaded", initApp);
    </script>
</body>
</html>

